<!DOCTYPE html>
<html>
    <head>
        <script src="processing.js"></script>
        <script src="init.js"></script>
        <style type="text/css">
            body { background: #222; }
        </style>
    </head>
    <body>
        <center>
        <script type="application/processing">

            int width = 800;
            int height = 600;

            function Ant() {

                this.direction = random(0.0, TWO_PI); // radians
                this.speed = random(0.1, 1.0);        // pixels/clock

                this.x = 200.0;
                this.y = 200.0;
                this.radius = 5;
            }

            Ant.prototype.draw = function() {

                ellipse(this.x, this.y, this.radius, this.radius);
            }

            Ant.prototype.move = function() {

                this.x = this.x + this.x_velocity();
                this.y = this.y + this.y_velocity();
            }

            Ant.prototype.choose_direction = function() {

                if (this.x >= width) {
                    this.direction = PI;
                }
                else if (this.x <= 0) {
                    this.direction = 0.0;
                }
                else if (this.y >= height) {
                    this.direction = PI * 1.5;
                }
                else if (this.y <= 0) {
                    this.direction = PI * 0.5;
                }
                else {
                    //change directions by about 1 degree
                    this.direction = this.direction + random(-0.02, 0.04);
                }
            }

            Ant.prototype.x_velocity = function() {

                return this.speed * cos(this.direction);
            }

            Ant.prototype.y_velocity = function() {

                return this.speed * sin(this.direction);
            }


            void setup() {
                size(800, 600);
                frameRate(500);
            }
            
            var numAnts = random(1,10);
            var ants = [];
            var i;

            for (i = 0; i<numAnts; i++) {

                ants[i] = new Ant();
                ants[i].x = random(10, width-10);
                ants[i].y = random(10, height-10);
            }


            void draw() {

                background(0);

                for (i = 0; i<numAnts; i++) {

                    ants[i].choose_direction();
                    ants[i].move();
                    ants[i].draw();
                }
            }


        </script><canvas width="800" height="600"></canvas>
    </center>
        </body>
    </html>
